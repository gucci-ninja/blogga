<!doctype html>
<html lang="en-us">
  <head>
    <title>Your Guide to Arch Linux // Words &amp; Code</title>
    <link rel="shortcut icon" href="https://pngimage.net/wp-content/uploads/2018/05/bullet-style-png-3-300x200.png" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.82.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Suhavi Sandhu" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://gucci-ninja.github.io/wordsandcode/css/main.min.571377f7ee2bcabe58ee65dc02d074a6d077aaf4d181a3bdcb4ddba832ebe8e9.css" />

    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-194918019-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-194918019-1');
</script>


    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-194918019-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Your Guide to Arch Linux"/>
<meta name="twitter:description" content="Hi everyone! This guide is meant to take you through the process of setting up Arch Linux. It&rsquo;s more of a set of guidelines rather than strict procedure. I&rsquo;m hoping to give new or potential users an idea of what it&rsquo;s like to dual boot your computer with Arch Linux.
I started using Arch in 2018 after getting tired of Ubuntu and since then I have dealt with my fair share of problems (corrupted ISO, problematic updates, bluetooth nightmares)."/>

    <meta property="og:title" content="Your Guide to Arch Linux" />
<meta property="og:description" content="Hi everyone! This guide is meant to take you through the process of setting up Arch Linux. It&rsquo;s more of a set of guidelines rather than strict procedure. I&rsquo;m hoping to give new or potential users an idea of what it&rsquo;s like to dual boot your computer with Arch Linux.
I started using Arch in 2018 after getting tired of Ubuntu and since then I have dealt with my fair share of problems (corrupted ISO, problematic updates, bluetooth nightmares)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gucci-ninja.github.io/wordsandcode/post/arch_linux/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-03-17T00:22:09-04:00" />
<meta property="article:modified_time" content="2021-03-17T00:22:09-04:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://gucci-ninja.github.io/wordsandcode/"><img class="app-header-avatar" src="/wordsandcode/img/avatar.jpg" alt="Suhavi Sandhu" /></a>
      <h1>Words &amp; Code</h1>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/wordsandcode/">Home</a>
            <hr class="app-header-menu-separator">
          
          <a class="app-header-menu-item" href="/wordsandcode/about/">About</a>
            <hr class="app-header-menu-separator">
          
          <a class="app-header-menu-item" href="/wordsandcode/post/thanksgiving/">A-Z Tech to be thankful for in 2020</a>
            <hr class="app-header-menu-separator">
          
          <a class="app-header-menu-item" href="/wordsandcode/post/open_source/">How to start contributing to open source</a>
            <hr class="app-header-menu-separator">
          
          <a class="app-header-menu-item" href="/wordsandcode/post/arch_linux/">Your Guide to Arch Linux</a>
      </nav>
      <p>Software engineer passionate about building powerful, useful and open source systems. Thanks for dropping by! ðŸ’›</p>
      <div class="app-header-social">
        
          <a href="https://github.com/gucci-ninja" target="_blank" rel="noreferrer noopener">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
          <a href="https://twitter.com/SuhaviSandhu" target="_blank" rel="noreferrer noopener">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>Twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg>
          </a>
        
          <a href="https://www.linkedin.com/in/suhavi/" target="_blank" rel="noreferrer noopener">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>LinkedIn</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Your Guide to Arch Linux</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Mar 17, 2021
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          9 min read
        </div>
      </div>
    </header>
    <div class="post-content">
      <p><img src="../../static/img/arch.png" alt=""></p>
<p>Hi everyone! This guide is meant to take you through the process of setting up Arch Linux. It&rsquo;s more of a set of guidelines rather than strict procedure. I&rsquo;m hoping to give new or potential users an idea of what it&rsquo;s like to dual boot your computer with Arch Linux.</p>
<p>I started using Arch in 2018 after getting tired of Ubuntu and since then I have dealt with my fair share of problems (corrupted ISO, problematic updates, bluetooth nightmares). However, I can say with confidence that using Arch has given me a better understanding and appreciation for operating systems as a whole. There are some things I used to take for granted - like the wifi menu that comes pre-installed with Windows or Mac OS - that I had to install and configure when it came to Arch Linux.</p>
<p>I decided to create this guide for myself when my first installation went south and I lost everything because I didn&rsquo;t have my dotfiles backed up. So the second time around I created <a href="https://github.com/gucci-ninja/.dotfiles.git">this repo</a></p>
<h1 id="step-0---preparation">Step 0 - Preparation</h1>
<p>If you are dual-booting you are essentially telling your current operating system to stop hogging all the space on your computer and make room for a new OS. So figure out what disk management tool your current OS uses and make a <code>partition</code> for your new OS. I went with 100GB, which should be fairly sufficient unless you know you&rsquo;re going to be storing a lot of stuff.</p>
<h1 id="step-1---securing-the-iso">Step 1 - Securing the ISO</h1>
<p>When you decide to make the switch to Arch you are going to need an image of the operating system. This comes in the form of a <code>.iso</code> file. You are going to have to flash this image file onto a good USB (or a CD if that&rsquo;s your jam and you still have a CD player..). If you are on Windows you can use a software called <code>Rufus</code> which lets you select your USB and flash an ISO image onto it.</p>
<h1 id="step-2---booting-the-iso">Step 2 - Booting the ISO</h1>
<p>Once you have a fresh image of Arch on your ISO, you want to plug the USB or whatever you&rsquo;re using into your computer of choice. Then, depending on what computer you&rsquo;re working with, you need to press some key(s) at startup so you&rsquo;re transported to the boot menu. This will prevent your default OS from loading up. For me, I spammed F2/F3 repeatedly until I saw the boot menu. Then, I selected the option to boot into the USB. Remember, if you mess up, it&rsquo;s not the end of the world, just possibly the end of your PC :D JK</p>
<h1 id="step-3---mount-your-system">Step 3 - Mount your system</h1>
<p>This is actually a bunch of steps but I <em>usually</em> do them all at once. It&rsquo;s kind of intimidating if it&rsquo;s your first time because you just see a black screen with a weird font of white text.</p>
<pre><code># To see partitions (like the one you made in Step 0)
fdisk -l
</code></pre><p>My EFI disk is sda1 and the Arch one is sda5. I know this because sda5 says exactly 100GB, which is how much I allocated to it.</p>
<pre><code># To format sda5
mkfs ext4 -L &quot;Arch Linux&quot; /dev/sda5

# To mount the partition
mount /dev/sda5 /mnt

# Get wifi
wifi-menu

# Install base system
pacstrap /mnt base base-devel vim

# Mount EFI partition
mkdir -p /mnt/boot/efi
mount /dev/sda1 /mnt/boot/efi

# Generate the fstab (I have no clue what this is)
genfstab -p /mnt &gt;&gt; /mnt/etc/fstab
</code></pre><h1 id="step-4---get-out-of-the-usb">Step 4 - Get out of the USB</h1>
<p>At this point you have sucessfully taken the image on your USB and mounted it onto your computer. This step is basically the equivalent of <code>cd</code> into your new directory. Still keep the USB plugged in though, we&rsquo;re not done with it yet.</p>
<pre><code># Chroot into arch linux
arch-chroot /mnt
</code></pre><h1 id="step-5---wifi">Step 5 - Wifi</h1>
<p>Most important step because without wifi you can&rsquo;t browse memes.</p>
<pre><code>pacman -S networkmanager

# Automatically start it up
systemctl enable NetworkManager
</code></pre><h1 id="step-6---bootloader">Step 6 - Bootloader</h1>
<p>You need something to load your OS each time you restart your computer so get grub.</p>
<pre><code># Download grub
pacman -S grub efibootmgr

# Install grub into HDD
grub-install /dev/sda
ls -l /boot/efi/EFI/arch

# Generate grub config
grub -mkconfig -o /boot/grub/grub.cfg
</code></pre><h1 id="step-7---set-up-some-boring-things">Step 7 - Set Up Some Boring Things</h1>
<p>Like date, timezone, clock, etc</p>
<pre><code>timedatectl set-ntp true

# Set up timezone
ln -sf /usr/share/zoneinfo/Canada/Eastern /etc/localtime

# Set clock
hwclock --systohc

# Also set locale
# First uncomment the Canada locale in /etc/locale.gen
vi /etc/locale.gen
# Generate the locales
locale-gen

# Do this step
mkinitcpio -p linux

# Set the root password
passwd
</code></pre><h1 id="step-9---unmount">Step 9 - Unmount</h1>
<pre><code>umount -R /mnt
reboot
</code></pre><p>Now you can take out the USB.</p>
<h1 id="step-10---take-a-break-because-youve-come-this-far">Step 10 - Take a break because you&rsquo;ve come this far</h1>
<p>ðŸ˜Ž</p>
<h1 id="step-11---users">Step 11 - Users</h1>
<p>After rebooting, login as root and create a user.</p>
<pre><code>useradd -m -g wheel suhavi
psswd suhavi

# Give sudo ability
vim /etc/sudoers
# Uncomment the following line
%wheel ALl=(ALL) ALL
</code></pre><h1 id="step-12---xorg">Step 12 - Xorg</h1>
<p>This is a graphical server. So you don&rsquo;t have to look at a blank sceen all the time.</p>
<pre><code>pacman -S xorg-server xorg-init
# Type startx to start it
</code></pre><h1 id="step-13---terminal--shell--git--vs-code">Step 13 - Terminal + Shell + Git + VS Code</h1>
<p>At this point the steps are very general. It&rsquo;s important to do your research to see which terminal, shell and editor you want. These are the ones I decided to go with</p>
<ul>
<li>terminal: termite</li>
<li>shell: fish</li>
<li>editor: VS code</li>
<li>version control: git</li>
</ul>
<pre><code>pacman -S termite fish git code

# Make fish your default
chsh -l # See all shells
chsh -s fish

# Copy the following to fish config file to make startx run on startup
if status is-login
  if test -z &quot;$DISPLAY&quot; -a $XDG_VTNR = 1
    exec startx -- -keeptty
  end
end

</code></pre><p>Configs are your best friend with Linux. Located under .config at the root level, they contain rules for all the customizations you want to make to your operating system. Take a look at the files in this folder to get an idea of the kinds of changes you can make.</p>
<h1 id="step-14---window-manager">Step 14 - Window Manager</h1>
<p>There are lots of choices for window manager, I personally went with bspwm because I like binary trees. I also got dmenu, which is a search bar that lets you type commands or applications to open. It can be accessed with (cmd/windows key) + spacebar. However, in order for these hotkeys and shortcuts to work you need sxhkd. Lastly, I installed some fonts!</p>
<pre><code>pacman -S bspwm dmenu sxhkd

# Fonts
pacman -S noto-fonts
# Fonts can be managed at ~/.config/fontconfig/fonts.conf

# Make x server start bspwm
vim ~/xinitrc
# Add the followng
sxhkd &amp;
exec bspwm

# Make termite your default terminal by going into the sxhkdrc file and changing xterm to termite

# Add custom keybinds to sxhkdrc
</code></pre><h1 id="step-15---sound">Step 15 - Sound</h1>
<p>I didn&rsquo;t have sound in the beginning.</p>
<pre><code>pacman -S alsa-utils
alsamixer -c 0
</code></pre><p>Use the arrow keys and stuff to toggle all sound things on</p>
<h1 id="step-16---wallpaper">Step 16 - Wallpaper</h1>
<ul>
<li>find a good wallpaper</li>
</ul>
<pre><code>feh --bg-scale wallpaper.jpg

# Edit the following to xinitrc
~/.fehbg &amp;

# Make sure it's before exec bspwm^
</code></pre><h1 id="step-17---yay">Step 17 - Yay</h1>
<ul>
<li>this will help download AUR things</li>
</ul>
<pre><code>git clone https://aur.archlinux.org/yay.git

cd yay

makepkg -si
</code></pre><h1 id="step-18---polybar">Step 18 - Polybar</h1>
<p>I actually hate this part</p>
<pre><code>yay -S polybar
install -Dm644 /usr/share/doc/polybar/config $HOME/.config/polybar/config
example polybar

# Make a lot of changes to example config

# I was getting unicode errors so
sudo pacman -S ttf-font-awesome

# In polybar config change fonts
font-1 = &quot;Font Awesome 5 Free:style=Regular:size=10;5&quot;
font-2 = &quot;Font Awesome 5 Free:style=Solid:size=10;5&quot;

# Go through all unicode characters in polybar config and replace them with icons from the FA cheatsheet

# Put this line in bspwmrc
polybar main &amp;

</code></pre><h1 id="step-19---backing-up-your-dotfiles">Step 19 - Backing Up Your Dotfiles</h1>
<p>I&rsquo;m not trying to lose all my stuff again.</p>
<pre><code># Initialize a git bare repo
git init --bare $HOME/.dotfiles

# Create an alias
alias dotfiles =&quot;git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME&quot;

# Save alias
funcsave dotfiles

# Ignore files you don't want tracked
dotfiles config --local status.showUntrackedFiles no

# Create a github repo called .dotfiles

# dotfiles remote add origin https://github.com/gucci-ninja/.dotfiles
</code></pre><h1 id="step-20---make-your-windows-look-less-ugly">Step 20 - Make your windows look less ugly</h1>
<p>Since I have bspwm I don&rsquo;t have a display manager to add GTK themes to. So I have to get lxappearance &gt;:( I feel lied to</p>
<pre><code>yay -S lxappearance
sudo pacman -S gtk-engine-murrine adwaita-icon-theme

</code></pre><p>Step 20 was made possible largely due to this reddit post, <a href="https://www.reddit.com/r/unixporn/comments/74z2z6/easily_getting_started_with_bspwm_and_polybar/">https://www.reddit.com/r/unixporn/comments/74z2z6/easily_getting_started_with_bspwm_and_polybar/</a>
and I wish I had found it earlier.</p>
<h1 id="step-21---neofetch">Step 21 - Neofetch</h1>
<p>You don&rsquo;t need to do this, it&rsquo;s mostly fo showing off to people.</p>
<pre><code>pacman -S neofetch

# Add the following to fish.config
neofetch

</code></pre><p>Now eveyr time you create a new terminal session you can show off.</p>
<h1 id="step-22---file-manager">Step 22 - File Manager</h1>
<ul>
<li>I&rsquo;m using thunar</li>
</ul>
<h1 id="step----aliases">Step ?? - Aliases</h1>
<h1 id="step-23---connecting-to-eduroam">Step 23 - Connecting to Eduroam</h1>
<ul>
<li>this is too hard and I failed</li>
<li>luckily it was easy to connect to Mac-WiFi (note the capitals)</li>
<li>I&rsquo;ll post my wifi config if someone asks</li>
</ul>
<h1 id="step-24---bluetooth">Step 24 - Bluetooth</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pacman -S bluez bluez-utils
$ pacman -S pulseaudio-bluetooth pulseaudio-alsa pavucontrol

systemctl enable bluetooth.service

$ sudo vim etc/bluetooth/main.conf
<span style="color:#75715e"># add the following line at the end</span>
<span style="color:#75715e"># this will ensure your bluetooth headphones auto-connect</span>
AutoEnable<span style="color:#f92672">=</span>true

<span style="color:#75715e"># make a directory for pulse (you may already have it)</span>
$ mkdir ~/.config/pulse
<span style="color:#75715e"># copy sample</span>
$ cp /etc/pulse/* ~/.config/pulse/

$ systemctl restart bluetooth

$ bluetoothctl
<span style="color:#75715e"># you should be in the bluetooth user now</span>
<span style="color:#f92672">[</span>bluetooth<span style="color:#f92672">]</span>~ power on
<span style="color:#f92672">[</span>bluetooth<span style="color:#f92672">]</span>~ agent on
<span style="color:#f92672">[</span>bluetooth<span style="color:#f92672">]</span>~ default-agent
<span style="color:#f92672">[</span>bluetooth<span style="color:#f92672">]</span>~ scan on
<span style="color:#75715e"># at this point you should put your headphones in pairing mode</span>
<span style="color:#75715e"># they should show up with a mac address</span>
<span style="color:#f92672">[</span>bluetooth<span style="color:#f92672">]</span>~ pair 00:00:00:00:00
<span style="color:#f92672">[</span>bluetooth<span style="color:#f92672">]</span>~ connect 00:00:00:00:00
<span style="color:#75715e"># if this part fails run the following in a new terminal</span>
$ pulseaudio --start
<span style="color:#75715e"># it should connect now</span>
<span style="color:#f92672">[</span>bluetooth<span style="color:#f92672">]</span>~ trust 00:00:00:00:00
<span style="color:#f92672">[</span>bluetooth<span style="color:#f92672">]</span>~ scan off
<span style="color:#f92672">[</span>bluetooth<span style="color:#f92672">]</span>~ exit

<span style="color:#75715e"># it should connect your headphoens at this point. if you don&#39;t hear sound, restart spotify or whatever and it should work</span>
<span style="color:#75715e"># if it doesn&#39;t, open pavucontrol</span>
$ pavucontrol

<span style="color:#75715e"># this interface will show you your connected devices, make sure it is not on mute and that under configuration tab it says it&#39;s connect to ADP SINK or sm dumb</span>
</code></pre></div><h2 id="step-">Step ??</h2>
<ul>
<li>downloaded nerd-fonts-iosevka</li>
<li>tty-clock</li>
</ul>
<h2 id="polybar-improements">polybar improements</h2>
<ul>
<li>rofi</li>
<li><a href="https://awesomeopensource.com/project/adi1090x/polybar-themes">https://awesomeopensource.com/project/adi1090x/polybar-themes</a></li>
<li>pip3 install pywal</li>
</ul>
<h1 id="help">Help</h1>
<p>I updated my system and something broke.</p>
<pre><code>$ uname -a
  This is the linux version you're running
$ cd /var/cache/pacman/pkg
$ ls
  These are the linux versions you have saved in your cache. Find one you want to downgrade to
$ sudo pacman -U linux-#.#.#.arch---
$ reboot
</code></pre>
    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
